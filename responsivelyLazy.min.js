/*
 * Responsively Lazy
 * http://ivopetkov.com/b/lazy-load-responsive-images/
 * Copyright 2015-2016, Ivo Petkov
 * Free to use under the MIT license.
*/
responsivelyLazy=function(){var u=!1,p=null,r=null,n="undefined"!==typeof IntersectionObserver,v=function(a){if(null===p)return!1;var g=a.getBoundingClientRect();a=g.top;var b=g.left,c=g.width,g=g.height;return a<r&&0<a+g&&b<p&&0<b+c},t=function(a,g){var b=g.getAttribute("data-srcset");if(null!==b){for(var b=b.split(","),c=[],k=b.length,f=0;f<k;f++){var e=b[f].trim(),h=e.lastIndexOf(" ");if(-1===h)var l=e,e=999998;else l=e.substr(0,h),e=parseInt(e.substr(h+1,e.length-h-2),10);h=!1;-1!==l.indexOf(".webp",
l.length-5)?u&&(h=!0):h=!0;h&&c.push([l,e])}c.sort(function(d,a){if(d[1]<a[1])return-1;if(d[1]>a[1])return 1;if(d[1]===a[1]){if(-1!==a[0].indexOf(".webp",a[0].length-5))return 1;if(-1!==d[0].indexOf(".webp",d[0].length-5))return-1}return 0});b=c}else b=[];l=a.offsetWidth*window.devicePixelRatio;c=null;k=b.length;for(f=0;f<k;f++)if(e=b[f],e[1]>=l){c=e;break}null===c&&(c=[g.getAttribute("src"),999999]);"undefined"===typeof a.lastSetOption&&(a.lastSetOption=["",0]);if(a.lastSetOption[1]<c[1]){var x=
0===a.lastSetOption[1],w=c[0],b=new Image;b.addEventListener("load",function(){g.setAttribute("srcset",w);if(x){var d=a.getAttribute("data-onlazyload");null!==d&&(new Function(d)).bind(a)()}},!1);b.addEventListener("error",function(){a.lastSetOption=["",0]},!1);b.src=w;a.lastSetOption=c}},m=function(){var a=function(a,b){for(var c=a.length,k=0;k<c;k++){var f=a[k],e=b?f:f.parentNode;v(e)&&t(e,f)}};a(document.querySelectorAll(".responsively-lazy > img"),!1);a(document.querySelectorAll("img.responsively-lazy"),
!0)};if("srcset"in document.createElement("img")&&"undefined"!==typeof window.devicePixelRatio&&"undefined"!==typeof window.addEventListener&&"undefined"!==typeof document.querySelectorAll){var p=window.innerWidth,r=window.innerHeight,q=new Image;q.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAEADMDOJaQAA3AA/uuuAAA=";q.onload=q.onerror=function(){u=2===q.width;if(n){var a=function(){for(var a=document.querySelectorAll(".responsively-lazy"),b=a.length,c=0;c<b;c++){var d=a[c];"undefined"===
typeof d.responsivelyLazyObserverAttached&&(d.responsivelyLazyObserverAttached=!0,g.observe(d))}},g=new IntersectionObserver(function(a){for(var c in a){var b=a[c];if(0<b.intersectionRatio)if(b=b.target,"img"!==b.tagName.toLowerCase()){var d=b.querySelector("img");null!==d&&t(b,d)}else t(b,b)}});m()}else{var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)},c=!0,k=function(){c&&(c=!1,m());b.call(null,k)},f=
function(){c=!0},e=function(){for(var a=document.querySelectorAll(".responsively-lazy"),b=a.length,c=0;c<b;c++)for(var d=a[c].parentNode;d&&"html"!==d.tagName.toLowerCase();)"undefined"===typeof d.responsivelyLazyScrollAttached&&(d.responsivelyLazyScrollAttached=!0,d.addEventListener("scroll",f)),d=d.parentNode};k()}var h=function(){if(n)var b=null;window.addEventListener("resize",function(){p=window.innerWidth;r=window.innerHeight;n?(window.clearTimeout(b),b=window.setTimeout(function(){m()},300)):
c=!0});n?(window.addEventListener("load",m),a()):(window.addEventListener("scroll",f),window.addEventListener("load",f),e());"undefined"!==typeof MutationObserver&&(new MutationObserver(function(){n?(a(),m()):(e(),c=!0)})).observe(document.querySelector("body"),{childList:!0,subtree:!0})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",h):h()}}return{run:m,isVisible:v}}();